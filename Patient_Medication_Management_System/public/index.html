<html ng-app="pmmsApp">

<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<head>
	<script src="javascripts/angular/angular.js"></script>
	<script src="javascripts/patientsController.js"></script>
	<link rel="stylesheet" href="stylesheets/style.css" type="text/css" />
</head>

<body ng-controller="PatientsController as patientsController">
<section class="patientslist" id = "viewPatients">
<div>
	<table>
		<tr>
			<th>List of Patients</th><th></th>
		</tr>
		<!--make it look like a link-->
		<tr ng-repeat="patient in patients" ng-click="patientsController.getPatientMedications(patient._id); patientsController.getPatientStats(patient._id)">
			<td>{{patient._id}}</td>
			<td>{{patient.firstName}}</td>
			<td>{{patient.lastName}}</td>
		</tr>
	</table>
</div>
</section>

<section ng-show="selectedPatientId != undefined" class="patientmedinfo" id = "patientMedInfo">
<div>
	<section id = "medications">
	<div>
	<table>
		<tr>
			<th>List of Medicines</th><th></th>
		</tr>
		<tr ng-repeat="medication in medications">
			<!--TODO: ensure what happens when some of them are undefined-->
			<td>{{medication.medname}}</td>
			<td>{{medication.dose}}</td>
			<td>{{medication.startDate}}</td>
			<td>{{medication.stopDate}}</td>
		</tr>	
	</table>
	</div>
	</section>

	<section id = "stats">
	<div>
		<table class="data">
		<tr>
			<th>Patient's Stats</th><th></th>
		</tr>
		<tr>
			<td>Temperature</td>
			<td><input type="text" ng-model="temp"></input></td>
		</tr>
		<tr>
			<td>Pulse</td>
			<td><input type="text" ng-model="pulse"></input></td>
		</tr>
		<tr>
			<td><button ng-click="patientsController.updatePatientStats(selectedPatientId, temp, pulse)">Update</button></td>
		</tr>	
		</table>
	</div>
	<div>
		<p ng-show="false" id="updateMessage">Stats updated!</p>
	</div>
	</section>
</div>
</section>

</body>
</html>